<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>DragnDrop</title>

    <link rel="stylesheet" href="css/master.css"/>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col col-3"></div>
        <div class="col col-6">
            <ul>
                <li><a href="#" draggable="true" class="draggable" data-index="0">Lorem ipsum. 0</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="1">Magnam, sunt? 1</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="2">Iure, porro. 2</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="3">Laudantium, sapiente! 3</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="4">Fugit, quidem. 4</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="5">Asperiores, molestias? 5</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="6">Fuga, velit? 6</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="7">Asperiores, dolorum! 7</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="8">Alias, minus. 8</a></li>
                <li><a href="#" draggable="true" class="draggable" data-index="9">Impedit, minima. 9</a></li>
            </ul>
        </div>
        <div class="col col-3"></div>
    </div>
</div>

<script>
    (function(w,d){
        var dragSrcElm;
        var droppableIndex, targetIndex;

        var drags = d.querySelectorAll(".draggable");
        [].slice.call(drags).forEach(function(el){
            el.addEventListener("dragstart", function(evt){
                    this.classList.add("dragstart");
                    dragSrcElm = this;
                    evt.dataTransfer.effectAllowed = "copy";
                    evt.dataTransfer.setData("text/html", this.innerHTML);
                    droppableIndex = parseInt(this.dataset.index);
                return false;
            }, false);

            el.addEventListener("dragenter", function(evt){
                this.parentNode.classList.add("dragenter");
                targetIndex = parseInt(this.dataset.index);
                return false;
            }, false);

            el.addEventListener("dragover", function(evt){
                if(evt.preventDefault){
                    evt.preventDefault();
                }
                this.parentNode.classList.add("dragenter");

                evt.dataTransfer.dropEffect = 'copy';
                return false;
            }, false);

            el.addEventListener("dragleave", function(evt){
                this.parentNode.classList.remove("dragenter");
            }, false);

            el.addEventListener("drop", function(evt){
                if(evt.preventDefault){
                    evt.preventDefault();
                }
                if(dragSrcElm != this){
                    if(droppableIndex < targetIndex){ // sens descente
                        for(var i = droppableIndex; i<targetIndex; i++){
                            drags.item(i).innerHTML = drags.item(i+1).innerHTML;
                        }
                    } else { // sens montÃ©e
                        for(var i=droppableIndex;i>targetIndex ;i-- ){
                            drags.item(i).innerHTML = drags.item(i-1).innerHTML;
                        }
                    }
                    this.innerHTML = evt.dataTransfer.getData("text/html");
                }
                return false;
            }, false);

            el.addEventListener("dragend", function(evt){
                //this.classList.remove("dragstart");
                [].slice.call(drags).forEach(function(el){
                    el.parentNode.classList.remove("dragenter");
                    el.classList.remove("dragstart");
                });
                //return false;
            }, false);


        });
    })(window, document);
</script>
</body>
</html>
